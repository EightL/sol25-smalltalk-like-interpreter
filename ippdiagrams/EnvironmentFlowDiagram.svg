<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1156px" preserveAspectRatio="none" style="width:474px;height:1156px;background:#FFFFFF;" version="1.1" viewBox="0 0 474 1156" width="474px" zoomAndPan="magnify"><title>Environment Variable Management</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="279.2344" x="96.2434" y="32.9951">Environment Variable Management</text></g><ellipse cx="129.6377" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="none" height="477.0898" style="stroke:#000000;stroke-width:1.5;" width="252.2754" x="11" y="77.2969"/><path d="M212.666,77.2969 L212.666,86.5938 L202.666,96.5938 L11,96.5938" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191.666" x="14" y="91.292">Environment.lookup(name)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="185.3809" x="36.9473" y="113.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165.3809" x="46.9473" y="134.7324">Start from innermost frame</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161.2754" x="49" y="259.9648"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.2754" x="59" y="281.1035">Return reference to var</text><ellipse cx="129.6377" cy="337.4492" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="129.6377" cy="337.4492" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><polygon fill="#F1F1F1" points="79.05,211.5625,180.2253,211.5625,192.2253,223.5625,180.2253,235.5625,79.05,235.5625,67.05,223.5625,79.05,211.5625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="133.6377" y="245.7729">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101.1753" x="79.05" y="227.3706">frame.has(name)?</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="143.2227" x="58.0264" y="390.4492"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123.2227" x="68.0264" y="411.5879">Move to outer frame</text><polygon fill="#F1F1F1" points="66.3071,167.5625,192.9683,167.5625,204.9683,179.5625,192.9683,191.5625,66.3071,191.5625,54.3071,179.5625,66.3071,167.5625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126.6611" x="66.3071" y="183.3706">more frames to check?</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125.9668" x="66.6543" y="466.418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105.9668" x="76.6543" y="487.5566">Throw NameError</text><ellipse cx="129.6377" cy="531.3867" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="129.6377" cy="531.3867" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="none" height="346.1211" style="stroke:#000000;stroke-width:1.5;" width="409.1606" x="46.0771" y="564.3867"/><path d="M269.3926,564.3867 L269.3926,573.6836 L259.3926,583.6836 L46.0771,583.6836" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213.3154" x="49.0771" y="578.3818">Environment.set(name, value)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104.2637" x="77.5059" y="593.6836"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84.2637" x="87.5059" y="614.8223">Get top frame</text><path d="M213.1982,700.4727 L213.1982,709.0391 L193.1982,713.0391 L213.1982,717.0391 L213.1982,725.6055 A0,0 0 0 0 213.1982,725.6055 L423.2378,725.6055 A0,0 0 0 0 423.2378,725.6055 L423.2378,710.4727 L413.2378,700.4727 L213.1982,700.4727 A0,0 0 0 0 213.1982,700.4727" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M413.2378,700.4727 L413.2378,710.4727 L423.2378,710.4727 L413.2378,700.4727" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.0396" x="219.1982" y="717.5396">Cannot assign to parameters</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="127.1211" x="66.0771" y="696.0547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107.1211" x="76.0771" y="717.1934">Throw ScopeError</text><ellipse cx="129.6377" cy="769.5391" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="129.6377" cy="769.5391" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><polygon fill="#F1F1F1" points="70.3408,647.6523,188.9346,647.6523,200.9346,659.6523,188.9346,671.6523,70.3408,671.6523,58.3408,659.6523,70.3408,647.6523" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="133.6377" y="681.8628">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118.5938" x="70.3408" y="663.4604">name in paramFlags?</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="134.9258" x="62.1748" y="822.5391"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114.9258" x="72.1748" y="843.6777">Assign value to var</text><ellipse cx="129.6377" cy="887.5078" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="129.6377" cy="887.5078" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><rect fill="none" height="225.2031" style="stroke:#000000;stroke-width:1.5;" width="411.356" x="52.3652" y="920.5078"/><path d="M262.0977,920.5078 L262.0977,929.8047 L252.0977,939.8047 L52.3652,939.8047" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199.7324" x="55.3652" y="934.5029">Block Captures Environment</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="134.5449" x="62.3652" y="949.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114.5449" x="72.3652" y="970.9434">Clone environment</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="113.9258" x="72.6748" y="1003.7734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93.9258" x="82.6748" y="1024.9121">Copy all frames</text><path d="M201.1396,1062.1602 L201.1396,1070.7266 L181.1396,1074.7266 L201.1396,1078.7266 L201.1396,1087.293 A0,0 0 0 0 201.1396,1087.293 L453.7212,1087.293 A0,0 0 0 0 453.7212,1087.293 L453.7212,1072.1602 L443.7212,1062.1602 L201.1396,1062.1602 A0,0 0 0 0 201.1396,1062.1602" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M443.7212,1062.1602 L443.7212,1072.1602 L453.7212,1072.1602 L443.7212,1062.1602" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231.5815" x="207.1396" y="1079.2271">Closures capture their environment</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103.0039" x="78.1357" y="1057.7422"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83.0039" x="88.1357" y="1078.8809">Store in Block</text><ellipse cx="129.6377" cy="1122.7109" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="129.6377" cy="1122.7109" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="293.9336" y2="326.4492"/><polygon fill="#181818" points="125.6377,316.4492,129.6377,326.4492,133.6377,316.4492,129.6377,320.4492" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="235.5625" y2="259.9648"/><polygon fill="#181818" points="125.6377,249.9648,129.6377,259.9648,133.6377,249.9648,129.6377,253.9648" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="192.2253" x2="220.2754" y1="223.5625" y2="223.5625"/><polygon fill="#181818" points="216.2754,292.4492,220.2754,302.4492,224.2754,292.4492,220.2754,296.4492" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="220.2754" x2="220.2754" y1="223.5625" y2="370.4492"/><line style="stroke:#181818;stroke-width:1;" x1="220.2754" x2="129.6377" y1="370.4492" y2="370.4492"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="370.4492" y2="390.4492"/><polygon fill="#181818" points="125.6377,380.4492,129.6377,390.4492,133.6377,380.4492,129.6377,384.4492" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="191.5625" y2="211.5625"/><polygon fill="#181818" points="125.6377,201.5625,129.6377,211.5625,133.6377,201.5625,129.6377,205.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="424.418" y2="434.418"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="244.2754" y1="434.418" y2="434.418"/><polygon fill="#181818" points="240.2754,326.4492,244.2754,316.4492,248.2754,326.4492,244.2754,322.4492" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="244.2754" x2="244.2754" y1="179.5625" y2="434.418"/><line style="stroke:#181818;stroke-width:1;" x1="244.2754" x2="204.9683" y1="179.5625" y2="179.5625"/><polygon fill="#181818" points="214.9683,175.5625,204.9683,179.5625,214.9683,183.5625,210.9683,179.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="54.3071" x2="27" y1="179.5625" y2="179.5625"/><polygon fill="#181818" points="23,312.4492,27,322.4492,31,312.4492,27,316.4492" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="27" x2="27" y1="179.5625" y2="446.418"/><line style="stroke:#181818;stroke-width:1;" x1="27" x2="129.6377" y1="446.418" y2="446.418"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="446.418" y2="466.418"/><polygon fill="#181818" points="125.6377,456.418,129.6377,466.418,133.6377,456.418,129.6377,460.418" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="147.5625" y2="167.5625"/><polygon fill="#181818" points="125.6377,157.5625,129.6377,167.5625,133.6377,157.5625,129.6377,161.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="500.3867" y2="520.3867"/><polygon fill="#181818" points="125.6377,510.3867,129.6377,520.3867,133.6377,510.3867,129.6377,514.3867" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="67.2969" y2="113.5938"/><polygon fill="#181818" points="125.6377,103.5938,129.6377,113.5938,133.6377,103.5938,129.6377,107.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="730.0234" y2="758.5391"/><polygon fill="#181818" points="125.6377,748.5391,129.6377,758.5391,133.6377,748.5391,129.6377,752.5391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="671.6523" y2="696.0547"/><polygon fill="#181818" points="125.6377,686.0547,129.6377,696.0547,133.6377,686.0547,129.6377,690.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="200.9346" x2="433.2378" y1="659.6523" y2="659.6523"/><polygon fill="#181818" points="429.2378,728.5391,433.2378,738.5391,437.2378,728.5391,433.2378,732.5391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="433.2378" x2="433.2378" y1="659.6523" y2="802.5391"/><line style="stroke:#181818;stroke-width:1;" x1="433.2378" x2="129.6377" y1="802.5391" y2="802.5391"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="802.5391" y2="822.5391"/><polygon fill="#181818" points="125.6377,812.5391,129.6377,822.5391,133.6377,812.5391,129.6377,816.5391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="627.6523" y2="647.6523"/><polygon fill="#181818" points="125.6377,637.6523,129.6377,647.6523,133.6377,637.6523,129.6377,641.6523" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="856.5078" y2="876.5078"/><polygon fill="#181818" points="125.6377,866.5078,129.6377,876.5078,133.6377,866.5078,129.6377,870.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="983.7734" y2="1003.7734"/><polygon fill="#181818" points="125.6377,993.7734,129.6377,1003.7734,133.6377,993.7734,129.6377,997.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="1037.7422" y2="1057.7422"/><polygon fill="#181818" points="125.6377,1047.7422,129.6377,1057.7422,133.6377,1047.7422,129.6377,1051.7422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="129.6377" x2="129.6377" y1="1091.7109" y2="1111.7109"/><polygon fill="#181818" points="125.6377,1101.7109,129.6377,1111.7109,133.6377,1101.7109,129.6377,1105.7109" style="stroke:#181818;stroke-width:1;"/><!--SRC=[TLBDJiCm3BxtAQoTEWdj0Th31DFWD0uCSG_5RQEbTkMacoR4k-EaPUi4I5MRsCxtbmOR7CAMZbQOEgG0RqQiUTVYpf1fCDQop0SZ-kdrRODbWiNioCen7uO-9zFXSW6V6K2nZmUW5kx04g5qxEDM9qfjwtDghNBa7GkETG-1eMgnEgoNsWUmDUIfisgD7y7NImWj4kHdzEEGKhrW68H0i4P1gZ3Y78sKKzy7xjCIwSFMQLNi-9Z6U0WeLrawaMID2elNLlW4pzhSYd02J61V_mRXCIIXToh03PSmdZ0eMt_ZFxgBeneFA9hf7frf_6-3aufznVrL1W1nG13RjA60ZI7TWl7UDXHj9JnKQpwR9V3ZFogw7sUJobbUVzXxS5mTbABNaFMEPcudSnl7X0f-gPUfolqPZ7FJtPRZFn4lM_qcp5YwSU7O9ufgv8f1M9a3NmH-0m00]--></g></svg>